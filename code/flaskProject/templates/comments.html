{% extends 'base.html' %}
{% block main %}
<body>
    <nav>
        <ul>
            <li><a href="/">Home</a></li>

             {% if not login %}
   
            <li><a href="/login-form">Login</a></li>

            <li><a href="/signup">Sign Up</a></li>

            {% else %}
            <li><a href={{ url_for('logout') }}>Logout</a></li>
            {% endif %}
        </ul>
    </nav>

    {% if not login %}
    {% else %}
        <p> Welcome back {{ login }}</p>
    {% endif %}

    <div class="section">
    <table class="course-table table table-light-grey table-border">
    <thead>
        <tr>
            <td>Course code</td>
            <td>Course name</td>
            <td>School</td>
            <td>Polytechnic</td>
            <td>Lower Bound</td>
            <td>Upper Bound</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            {% for item in chosenCourse %}
                <td>{{ item[0] }}</td>
                <td>{{ item[1] }}</td>
                <td>{{ item[2] }}</td>
                <td>{{ item[3] }}</td>
                <td>{{ item[4] }}</td>
                <td>{{ item[5] }}</td>
            {% endfor %}
        </tr>
    </tbody>
    </table>

    <h3 class="mt-4">Comment section</h3>
    <form method="post">
        <div class="col-sm-6">
            <label for="commentTextArea" class="form-label">Comment:</label>
            <textarea class="form-control" id="commentTextArea" rows="3" name="textbox" placeholder="Enter comment here..."></textarea>
        </div>
        {% for item in chosenCourse %}
            <input type="hidden" name="course-code" value={{ item[0] }}>
        {% endfor %}
        <div class="col mt-2">
            <button class="btn btn-primary" type="submit">Post</button>
        </div>
    </form>

    {% for item in courseComments %}
    <div class="row mt-4">
        <div class="row">
            <div class="col" id="commentUser">User: {{ item[1] }}</div>
        </div>
        <div class="row">
            <div class="col" id="comment">{{ item[0] }}</div>
        </div>
        <div class="row">
            {% for value in votes if value[0] == item[2] %}
                <div class="col">vote: {{ value[1] }}</div>
            {% else %}
                <div class="col">vote: 0</div>
            {% endfor %}
        </div>
        <div class="btn-group">
            <form action="{{ url_for('upvote') }}" method="post">
                <input type="hidden" name="upvote" value="{{ item[2] }}">
                <button class="btn btn-outline-primary" type="submit" value="upvote">Upvote</button>
            </form>
            <form action="{{ url_for('downvote') }}" method="post">
                <input type="hidden" name="downvote" value="{{ item[2] }}">
                <button class="btn btn-outline-primary" type="submit" value="downvote">Downvote</button>
            </form>
        </div>
    </div>
    </div>

    {% endfor %}
</body>
{% endblock %}